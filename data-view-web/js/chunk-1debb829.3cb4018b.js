(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1debb829"],{"0096":function(t,e,a){"use strict";a("f842")},"16aa":function(t,e,a){"use strict";a("19c9")},"19c9":function(t,e,a){},"3d9c":function(t,e,a){"use strict";a("95b2")},"4d2e":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return s}));var n=a("0c6d"),i=a("db49"),o=i["a"].serviceBaseUrl;function r(t){return Object(n["a"])({url:o+"data-source/",method:"get",params:t})}function s(){return Object(n["a"])({url:o+"data-source/list",method:"get"})}},"75af":function(t,e,a){"use strict";a("fe77")},"8ed4":function(t,e,a){"use strict";a("b50f")},"95b2":function(t,e,a){},a6d4:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-layout",{staticClass:"data-view-container"},[a("a-layout-header",{staticClass:"data-view-header"},[a("a-icon",{staticClass:"back",attrs:{type:"left-circle"},on:{click:function(e){return t.handleBack()}}}),a("a-menu",{staticClass:"data-view-menu",attrs:{mode:"horizontal",theme:"dark"}},t._l(t.menus,(function(e){return a("a-sub-menu",{key:e.key},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title)),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"caret-down"}})],1),t._l(e.children,(function(e){return[void 0===e.children?a("a-menu-item",{key:e.key,attrs:{draggable:!0},on:{dragstart:function(a){return t.handleDragStart(a,e.key,e.version)}}},[a("icon",{staticClass:"chart-type-icon",attrs:{type:"icon-"+e.icon}}),a("span",[t._v(t._s(e.title))])],1):a("a-sub-menu",{key:e.key,attrs:{title:e.title}},t._l(e.children,(function(e){return a("a-menu-item",{key:e.key,attrs:{draggable:!0},on:{dragstart:function(a){return t.handleDragStart(a,e.key,e.version)}}},[a("icon",{staticClass:"chart-type-icon",attrs:{type:"icon-"+e.icon}}),a("span",[t._v(t._s(e.title))])],1)})),1)]}))],2)})),1),a("div",{staticClass:"handler"},[a("a-icon",{attrs:{type:"save"},on:{click:function(e){return t.handleSave()}}}),a("a-icon",{attrs:{type:"eye"},on:{click:function(e){return t.handlePreview()}}}),a("a-icon",{attrs:{type:"bug"},on:{click:function(e){return t.handleDebug()}}})],1)],1),a("a-layout",{staticClass:"data-view-main"},[a("a-layout-sider",{attrs:{"collapsed-width":"0",collapsible:!0},model:{value:t.layerCollapsed,callback:function(e){t.layerCollapsed=e},expression:"layerCollapsed"}},[a("layer")],1),a("a-layout",{staticClass:"data-view-screen"},[a("a-layout-content",{staticClass:"data-view-screen-wrapper",attrs:{id:"screenWrapper"},on:{mousedown:t.handleItemUnClick,mouseup:t.handleItemUnChoose}},[a("layout",{nativeOn:{dragover:function(e){return t.handleDragOver.apply(null,arguments)},drop:function(e){return t.handleDrop.apply(null,arguments)}}},t._l(t.items,(function(e,n){return a("item",{key:n,attrs:{item:e,index:n,active:e===t.currentItem}},[a("chart",{attrs:{id:e.elId,item:e,theme:t.screenConfig.theme}})],1)})),1)],1),a("a-layout-footer",{staticClass:"data-view-screen-footer toolbox"},[a("a-space",[a("div",{staticClass:"tool-item"},[a("span",{staticClass:"label"},[t._v("参考线")]),a("a-switch",{model:{value:t.refLine,callback:function(e){t.refLine=e},expression:"refLine"}})],1),a("div",{staticClass:"tool-item"},[a("span",{staticClass:"label"},[t._v("指示线")]),a("a-switch",{model:{value:t.indicatorLine,callback:function(e){t.indicatorLine=e},expression:"indicatorLine"}})],1),a("div",{staticClass:"tool-item"},[a("span",{staticClass:"label",staticStyle:{"margin-right":"15px"}},[t._v("缩放比例")]),a("a-slider",{staticClass:"data-view-scale",attrs:{min:20,max:200,marks:{100:{}}},model:{value:t.scale,callback:function(e){t.scale=e},expression:"scale"}}),a("span",{staticClass:"tool-btn",on:{click:function(e){return t.$store.commit("autoCanvasScale")}}},[t._v("自适应")]),a("span",{staticClass:"tool-btn",on:{click:function(e){t.scale=100}}},[t._v("实际大小")])],1)])],1)],1),a("a-layout-sider",{staticClass:"data-view-option-panel",attrs:{width:"400","collapsed-width":"0","reverse-arrow":!0,collapsible:!0},model:{value:t.optionCollapsed,callback:function(e){t.optionCollapsed=e},expression:"optionCollapsed"}},[null===t.currentItem?a("div",{staticClass:"data-view-screen-option dark-theme"},[a("div",{staticClass:"screen-option-header"},[a("span",[t._v("页面设置")])]),a("div",{staticClass:"screen-option-body"},[a("a-form",{staticClass:"dark",attrs:{layout:"horizontal","label-col":{span:6},"wrapper-col":{span:14,offset:1}}},[a("a-form-item",{attrs:{label:"大屏标题"}},[a("a-input",{model:{value:t.screenConfig.title,callback:function(e){t.$set(t.screenConfig,"title",e)},expression:"screenConfig.title"}})],1),a("a-form-item",{attrs:{label:"画板大小"}},[a("a-row",{attrs:{gutter:20}},[a("a-col",{attrs:{span:12}},[a("a-input-number",{attrs:{min:1,step:10},model:{value:t.screenConfig.width,callback:function(e){t.$set(t.screenConfig,"width",e)},expression:"screenConfig.width"}})],1),a("a-col",{attrs:{span:12}},[a("a-input-number",{attrs:{min:1,step:10},model:{value:t.screenConfig.height,callback:function(e){t.$set(t.screenConfig,"height",e)},expression:"screenConfig.height"}})],1)],1)],1),a("a-form-item",{attrs:{label:"背景图"}},[a("a-select",{model:{value:t.screenConfig.backgroundImg,callback:function(e){t.$set(t.screenConfig,"backgroundImg",e)},expression:"screenConfig.backgroundImg"}},t._l(t.backgroundImgList,(function(e){return a("a-select-option",{key:e.image_path,attrs:{value:e.image_path}},[t._v(" "+t._s(e.image_name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"上传背景图"}},[a("upload-image",{attrs:{height:"120px","image-type":"screen_background","image-url":t.screenConfig.backgroundImg},on:{uploaded:t.handleImageUploaded}})],1),a("a-form-item",{attrs:{label:"吸附距离"}},[a("a-input-number",{attrs:{min:1,precision:0},model:{value:t.screenConfig.diff,callback:function(e){t.$set(t.screenConfig,"diff",e)},expression:"screenConfig.diff"}})],1)],1)],1)]):a("chart-option",{staticClass:"data-view-chart-option dark-theme",attrs:{"data-source-list":t.dataSourceList}})],1)],1)],1)},i=[],o=a("1da1"),r=a("5530"),s=(a("96cf"),a("e25e"),a("99af"),a("d81d"),a("ac1f"),a("1276"),a("ace4"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("0d03"),a("c0e9")),c=a.n(s),l=a("4e72"),u=a("5880"),h=[{key:"Chart",title:"基础图表",children:[{key:"Scatter",title:"散点图",children:[{version:1,key:"ScatterNormal",icon:"ScatterNormalNew",title:"散点图"}]},{key:"Line",title:"折线图",children:[{version:1,key:"LineNormal",icon:"LineNormalNew",title:"折线图"},{version:1,key:"LineArea",icon:"LineAreaNew",title:"折线面积图"}]},{key:"Histogram",title:"柱状图",children:[{version:1,key:"HistogramNormal",icon:"HistogramNormalNew",title:"柱状图"},{version:1,key:"PictorialBar",icon:"PictorialBarNew",title:"象形柱状图"}]},{key:"Map",title:"地图",children:[{version:1,key:"MapChina",icon:"MapChinaNew",title:"中国地图"}]},{key:"Pie",title:"饼图",children:[{version:1,key:"PieNormal",icon:"PieNormalNew",title:"普通饼图"}]},{key:"Radar",title:"雷达图",children:[{version:1,key:"RadarNormal",icon:"RadarNormalNew",title:"雷达图"}]},{key:"Heat",title:"热力图",children:[]},{key:"relation",title:"关系图",children:[]},{key:"OtherChart",title:"其他图表",children:[{version:1,key:"FunnelNormal",icon:"FunnelNormal",title:"漏斗图"}]}]},{key:"Scene",title:"场景",children:[{key:"Operation",title:"运维",children:[{version:1,key:"EarlyWarning",icon:"EarlyWarningNew",title:"预警点滴"}]}]},{key:"Other",title:"其他",children:[{key:"Auxiliary",title:"辅助",children:[{version:1,key:"TitleText",icon:"TitleTextNew",title:"标题文本"},{version:1,key:"ImageChart",icon:"ImageChartNew",title:"图片"}]},{key:"Border",title:"边框",children:[{version:1,key:"Border1",icon:"Border",title:"边框1"}]},{key:"Components",title:"组件",children:[{version:2,key:"CarouselList",icon:"CarouselListNew",title:"轮播列表"},{version:1,key:"NumberFlop",icon:"NumberFlopNew",title:"数字翻牌器"},{version:1,key:"Counter",icon:"CounterNew",title:"计数器"},{version:1,key:"Progress",icon:"ProgressNew",title:"进度条"}]}]},{key:"3d",title:"高级3D图表",children:[]}],d=a("db49"),f=(a("383f"),function(){this.config={name:"散点图",type:"ScatterNormal",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:250,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",dimension:"无",name:"x",value:"y",sql:"select * from scatter_normal",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:{source:[["dimension"],["周一","120"],["周二","132"],["周三","101"],["周四","134"],["周五","90"],["周六","230"],["周日","210"]]},interval:8e3,option:{title:{show:!0,text:"气泡散点图",left:"center",textStyle:{color:"#ffffff"}},legend:{show:!1,textStyle:{color:"#ffffff"}},grid:{left:"10%",top:"60",right:"10%",bottom:"60"},xAxis:{show:!0,type:"category",axisLine:{show:!0,lineStyle:{color:"#ffffff"}},axisLabel:{show:!0,color:"#ffffff"},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{color:["#cccccc"]}},splitArea:{}},yAxis:{axisLine:{show:!0,lineStyle:{color:"#ffffff"}},axisLabel:{show:!0,color:"#ffffff"},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{color:["#cccccc"]}},splitArea:{}},series:[]}}}),m=function(){return(new f).config},p=function(){this.config={name:"标准折线图",type:"LineNormal",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:250,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",dimension:"无",name:"x",value:"y",sql:"select * from line_normal",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:{source:[["dimension"],["周一","120"],["周二","132"],["周三","101"],["周四","134"],["周五","90"],["周六","230"],["周日","210"]]},interval:8e3,option:{title:{show:!0,text:"标准折线图",left:"center",textStyle:{color:"#ffffff"}},legend:{show:!1,textStyle:{color:"#ffffff"}},grid:{left:"10%",top:"60",right:"10%",bottom:"60"},xAxis:{show:!0,type:"category",axisLine:{show:!0,lineStyle:{color:"#ffffff"}},axisLabel:{show:!0,color:"#ffffff"},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{color:["#cccccc"]}},splitArea:{}},yAxis:{axisLine:{show:!0,lineStyle:{color:"#ffffff"}},axisLabel:{show:!0,color:"#ffffff"},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{color:["#cccccc"]}},splitArea:{}},series:[]}}},y=function(){return(new p).config},v=function(){this.config={name:"标准折线面积图",type:"LineArea",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:250,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",dimension:"无",name:"x",value:"y",sql:"select * from line_normal",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:{source:[["dimension"],["周一","120"],["周二","132"],["周三","101"],["周四","134"],["周五","90"],["周六","230"],["周日","210"]]},interval:8e3,option:{title:{show:!0,text:"标准折线面积图",left:"center",textStyle:{color:"#ffffff"}},legend:{show:!1,textStyle:{color:"#ffffff"}},grid:{left:"10%",top:"60",right:"10%",bottom:"60"},xAxis:{show:!0,type:"category",axisLine:{show:!0,lineStyle:{color:"#ffffff"}},axisLabel:{show:!0,color:"#ffffff"},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{color:["#cccccc"]}},splitArea:{}},yAxis:{axisLine:{show:!0,lineStyle:{color:"#ffffff"}},axisLabel:{show:!0,color:"#ffffff"},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{color:["#cccccc"]}},splitArea:{}},series:[]}}},g=function(){return(new v).config},w=function(){this.config={name:"标准柱状图",type:"HistogramNormal",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:250,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",dimension:"无",name:"product",value:"amount",sql:"select * from histogram_normal",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:{source:[["dimension"],["周一","120"],["周二","132"],["周三","101"],["周四","134"],["周五","90"],["周六","230"],["周日","210"]]},interval:8e3,option:{title:{text:"标准柱状图",left:"center",textStyle:{color:"#fff"}},legend:{show:!1,textStyle:{color:"#ffffff"}},grid:{left:"10%",top:"60",right:"10%",bottom:"60"},xAxis:{show:!0,type:"category",axisLine:{show:!0,lineStyle:{color:"#ffffff"}},axisLabel:{show:!0,color:"#ffffff"},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{color:["#cccccc"]}},splitArea:{}},yAxis:{axisLine:{show:!0,lineStyle:{color:"#ffffff"}},axisLabel:{show:!0,color:"#ffffff"},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{color:["#cccccc"]}},splitArea:{}},series:[]}}},b=function(){return(new w).config},x=function(){this.config={name:"象形柱状图",type:"PictorialBar",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:250,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",dimension:"无",name:"name",value:"value",sql:"select * from pictorial_bar",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:{source:[["dimension"],["周一","120"],["周二","132"],["周三","101"],["周四","134"],["周五","90"],["周六","230"],["周日","210"]]},interval:8e3,option:{title:{text:"象形柱状图",left:"center",textStyle:{color:"#fff"}},legend:{show:!1,textStyle:{color:"#ffffff"}},grid:{left:"10%",top:"60",right:"10%",bottom:"60"},xAxis:{show:!0,type:"category",axisLine:{show:!0,lineStyle:{color:"#ffffff"}},axisLabel:{show:!0,color:"#ffffff"},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{color:["#cccccc"]}}},yAxis:{axisLine:{show:!0,lineStyle:{color:"#ffffff"}},axisLabel:{show:!0,color:"#ffffff"},axisTick:{show:!1},splitLine:{show:!1,lineStyle:{color:["#cccccc"]}}},series:[]}}},C=function(){return(new x).config},k=function(){this.config={name:"地图",type:"MapChina",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:250,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",name:"name",value:"value",sql:"select * from map_china_new",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:[],interval:8e3,option:{title:{show:!0,text:"地图",left:"center",textStyle:{color:"#ffffff"}},legend:{show:!1,textStyle:{color:"#ffffff"}},visualMap:{show:!0,text:[]},geo:{map:"china"},series:[{type:"map",map:"china",itemStyle:{areaColor:"#080B19",borderColor:"#00C8DC"},showLegendSymbol:!1}]}}},S=function(){return(new k).config},_=function(){this.config={name:"标准饼图",type:"PieNormal",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:250,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",name:"name",value:"value",sql:"select * from pie_normal",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:{source:[["dimension",""],["直接访问","335"],["邮件营销","310"],["联盟广告","274"],["视频广告","235"],["搜索引擎","400"]]},interval:8e3,option:{title:{text:"标准饼图",x:"center",textStyle:{color:"#ffffff"}},legend:{show:!1,textStyle:{color:"#ffffff"}},tooltip:{trigger:"item",formatter:"{a}<br/>{b}:{c}({d}%)"},series:[{type:"pie",center:["50%","50%"],radius:[0,"70%"],roseType:!1,label:{},labelLine:{}}]}}},I=function(){return(new _).config},L=function(){this.config={name:"标准雷达图",type:"RadarNormal",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:250,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",name:"name",value:"value",max:"max",dimension:"legend",sql:"select * from radar",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:{data:[{name:"预算分配",value:["4300","1000","2800","3500","5000","1900"]},{name:"实际开销",value:["5000","1400","2800","3100","4200","2100"]}],indicator:[{max:"6500",name:"销售"},{max:"1600",name:"管理"},{max:"3000",name:"信息技术"},{max:"3800",name:"客服"},{max:"5200",name:"研发"},{max:"2500",name:"市场"}]},interval:8e3,option:{title:{show:!0,text:"标准雷达图",left:"center",textStyle:{color:"#ffffff"}},legend:{show:!0,textStyle:{color:"#ffffff"}},radar:{indicator:[],center:["50%","50%"],radius:[0,"70%"],axisLine:{show:!0,lineStyle:{}},axisLabel:{show:!0},axisTick:{show:!0,lineStyle:{}},splitLine:{show:!0,lineStyle:{}},splitArea:{show:!0,areaStyle:{}}},series:[{type:"radar",itemStyle:{},lineStyle:{},data:[]}]}}},D=function(){return(new L).config},T=(a("a15b"),function(){this.config={name:"词云",type:"wordCloud",version:1,show:"true",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:250,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",name:"name",value:"value",sql:"select * from pie",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:[],interval:8e3,option:{title:{text:"词云",x:"center",textStyle:{color:"#fff"}},tooltip:{show:!0},series:[{type:"wordCloud",sizeRange:[6,66],rotationRange:[-45,90],textPadding:0,autoSize:{enable:!0,minSize:6},textStyle:{normal:{color:function(){return"rgb("+[Math.round(160*Math.random()),Math.round(160*Math.random()),Math.round(160*Math.random())].join(",")+")"}},emphasis:{shadowBlur:10,shadowColor:"#333"}},data:[]}],toolbox:{feature:{saveAsImage:{}}},backgroundColor:"rgba(255,255,255,0)"}}}),O=function(){return(new T).config},N=function(){this.config={name:"",type:"gauge",version:1,show:"true",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:250,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",sql:"select name,value from gauge",name:"name",value:"value",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:[],interval:8e3,option:{tooltip:{formatter:"{a} <br/>{b} : {c}%"},toolbox:{feature:{saveAsImage:{}}},series:{name:"",type:"gauge",detail:{formatter:"{value}%"},data:[],title:{textStyle:{fontWeight:"bolder",fontSize:20,color:"#fff",shadowColor:"#fff",shadowBlur:10}}},backgroundColor:"rgba(255,255,255,0)"}}},z=function(){return(new N).config},M=function(){this.config={name:"普通漏斗图",type:"FunnelNormal",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:250,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",name:"name",value:"value",sql:"select * from pie_normal",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:[],interval:8e3,option:{title:{text:"普通漏斗图",x:"center",textStyle:{color:"#ffffff"}},legend:{show:!1,textStyle:{color:"#ffffff"}},series:[]}}},$=function(){return(new M).config},E=function(){this.config={name:"预警点滴",type:"EarlyWarning",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:200,height:50,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",value:"value",sql:"select value from early_warning",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:{value:"0"},interval:8e3,option:{radius:16,boundary:32,spread:1,symbolSize:18,series:[{code:"0",codeColor:"#00E6B6",label:"",labelColor:"",alert:!1,symbol:"√"},{code:"1",codeColor:"#EF5350",label:"",labelColor:"",alert:!0,symbol:"✕"},{code:"2",codeColor:"#FFFF00",label:"",labelColor:"",alert:!0,symbol:"!"}]}}},B=function(){return(new E).config},R=function(){this.config={name:"标题文本",type:"TitleText",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:200,height:50,rotate:0},chartData:{},data:{},interval:8e3,option:{title:"标题文本",fontColor:"#ffffff",fontSize:16,height:50,fontWeight:"normal",textAlign:"center"}}},j=function(){return(new R).config},A=function(){this.config={name:"图片",type:"ImageChart",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:250,rotate:0},chartData:{},data:[],interval:8e3,option:{url:"",rotateX:0,rotateY:0,scaleX:1,scaleY:1,translateX:0,translateY:0}}},P=function(){return(new A).config},H=function(){this.config={name:"边框1",type:"Border1",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:200,height:50,rotate:0},chartData:{},data:{},interval:8e3,option:{border:["left-top","right-top","left-bottom","right-bottom"],color:["#4fd2dd","#235fa7"],backgroundColor:"transparent"}}},U=function(){return(new H).config},q=function(){this.config={name:"轮播列表",type:"CarouselList",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:200,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",sql:"select * from carousel_list",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:{body:[["1","key1","value1"],["2","key2","value2"],["3","key3","value3"],["4","key4","value4"]],header:["id","name","value"]},interval:8e3,option:{index:{show:!1,width:16,height:16,background:[]},header:{show:!0,height:50,fontColor:"#ffffff",fontSize:13,data:[]},body:{height:30,fontColor:"#e2e2e2",fontSize:12,speed:3,rowNum:5,data:[]}}}},G=function(){return(new q).config},X=function(){this.config={name:"轮播列表",type:"CarouselList",version:2,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:200,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",sql:"select * from carousel_list",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:{body:[["1","key1","value1"],["2","key2","value2"],["3","key3","value3"],["4","key4","value4"]],header:["id","name","value"]},interval:8e3,option:{index:{show:!1,width:16,height:16,background:[]},carousel:{show:!0,speed:3,rowNum:5},column:[],header:{show:!0,height:50,fontColor:"#ffffff",fontSize:13,textAlign:[],data:[]},body:{height:30,fontColor:"#e2e2e2",fontSize:12,textAlign:[],data:[]}}}},F=function(){return(new X).config},W=function(){this.config={name:"计数器",type:"Counter",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:200,height:50,rotate:0},chartData:{dataSourceType:"",staticData:'{"value": 100}',database:"",value:"data",sql:"select data from counter",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:{value:100},interval:8e3,option:{fontColor:"#ffffff",fontSize:16,height:50,fontWeight:"normal",textAlign:"center",thousandth:!0,prefix:{title:"某某数据：",fontColor:"#ffffff",fontSize:16,fontWeight:"normal"},unit:{title:"单位",fontColor:"#ffffff",fontSize:16,fontWeight:"normal"}}}},Y=function(){return(new W).config},K=function(){this.config={name:"数字翻牌器",type:"NumberFlop",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:200,height:50,rotate:0},chartData:{dataSourceType:"",staticData:'{"value": 100}',database:"",value:"data",sql:"select data from counter",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:{value:100},interval:8e3,option:{padding:20,align:0,title:{show:!0,text:"标题",position:"column",margin:10,color:"#ffffff",fontSize:16,fontWeight:"normal"},number:{color:"#ffffff",fontSize:16,fontWeight:"normal",fontFamily:"arial",space:1,digit:0,decimal:0,decimalSep:".",thousandth:!0,thousandthSep:",",backgroundImage:""},prefix:{show:!1,text:"",right:0,color:"#ffffff",fontSize:16,fontWeight:"normal",fontFamily:""},suffix:{show:!1,text:"",left:0,color:"#ffffff",fontSize:16,fontWeight:"normal",fontFamily:""}}}},V=function(){return(new K).config},J=function(){this.config={name:"进度条",type:"Progress",version:1,show:"true",lock:"false",choose:"false",refresh:"false",style:{x:0,y:0,width:350,height:50,rotate:0},chartData:{dataSourceType:"",staticData:"{}",database:"",value:"value",sql:"select * from progress",restType:"GET",restUrl:"",restHeader:"",restBody:"",fileName:""},data:{},interval:8e3,option:{type:"line",showInfo:!0,info:{color:"#ffffff",fontSize:20},strokeLinecap:"round",strokeWidth:10,strokeColor:"#5bc0de",width:150,gapDegree:0,gapPosition:"bottom"}}},Q=function(){return(new J).config},Z={ScatterNormal_1:m,LineNormal_1:y,LineArea_1:g,HistogramNormal_1:b,PictorialBar_1:C,MapChina_1:S,PieNormal_1:I,RadarNormal_1:D,wordCloud_1:O,gauge_1:z,FunnelNormal_1:$,EarlyWarning_1:B,TitleText_1:j,ImageChart_1:P,Border1_1:U,CarouselList_1:G,CarouselList_2:F,Counter_1:Y,NumberFlop_1:V,Progress_1:Q},tt=Z,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:t.screenWrapperStyle(),on:{mousedown:t.handleMousedown}},[a("ruler"),a("div",{ref:"layout",staticClass:"data-view-layout",style:t.layoutStyle(),attrs:{id:"data-view-layout"},on:{contextmenu:t.handleContextmenu}},[t._t("default"),a("refline")],2),a("contextmenu"),a("choose-area",{directives:[{name:"show",rawName:"v-show",value:t.groupAreaShow,expression:"groupAreaShow"}],attrs:{start:t.areaStart,width:t.areaSize.width,height:t.areaSize.height}})],1)},at=[],nt=(a("4160"),a("159b"),"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0);function it(t,e,a){t.addEventListener?t.addEventListener(e,a,!1):t.attachEvent&&t.attachEvent("on".concat(e),(function(){a(window.event)}))}function ot(t,e){for(var a=e.slice(0,e.length-1),n=0;n<a.length;n++)a[n]=t[a[n].toLowerCase()];return a}function rt(t){"string"!==typeof t&&(t=""),t=t.replace(/\s/g,"");for(var e=t.split(","),a=e.lastIndexOf("");a>=0;)e[a-1]+=",",e.splice(a,1),a=e.lastIndexOf("");return e}function st(t,e){for(var a=t.length>=e.length?t:e,n=t.length>=e.length?e:t,i=!0,o=0;o<a.length;o++)-1===n.indexOf(a[o])&&(i=!1);return i}for(var ct={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":nt?173:189,"=":nt?61:187,";":nt?59:186,"'":222,"[":219,"]":221,"\\":220},lt={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},ut={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},ht={16:!1,18:!1,17:!1,91:!1},dt={},ft=1;ft<20;ft++)ct["f".concat(ft)]=111+ft;var mt=[],pt="all",yt=[],vt=function(t){return ct[t.toLowerCase()]||lt[t.toLowerCase()]||t.toUpperCase().charCodeAt(0)};function gt(t){pt=t||"all"}function wt(){return pt||"all"}function bt(){return mt.slice(0)}function xt(t){var e=t.target||t.srcElement,a=e.tagName,n=!0;return!e.isContentEditable&&("INPUT"!==a&&"TEXTAREA"!==a&&"SELECT"!==a||e.readOnly)||(n=!1),n}function Ct(t){return"string"===typeof t&&(t=vt(t)),-1!==mt.indexOf(t)}function kt(t,e){var a,n;for(var i in t||(t=wt()),dt)if(Object.prototype.hasOwnProperty.call(dt,i))for(a=dt[i],n=0;n<a.length;)a[n].scope===t?a.splice(n,1):n++;wt()===t&&gt(e||"all")}function St(t){var e=t.keyCode||t.which||t.charCode,a=mt.indexOf(e);if(a>=0&&mt.splice(a,1),t.key&&"meta"===t.key.toLowerCase()&&mt.splice(0,mt.length),93!==e&&224!==e||(e=91),e in ht)for(var n in ht[e]=!1,lt)lt[n]===e&&(Ot[n]=!1)}function _t(t){if(t){if(Array.isArray(t))t.forEach((function(t){t.key&&It(t)}));else if("object"===typeof t)t.key&&It(t);else if("string"===typeof t){for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];var i=a[0],o=a[1];"function"===typeof i&&(o=i,i=""),It({key:t,scope:i,method:o,splitKey:"+"})}}else Object.keys(dt).forEach((function(t){return delete dt[t]}))}var It=function(t){var e=t.key,a=t.scope,n=t.method,i=t.splitKey,o=void 0===i?"+":i,r=rt(e);r.forEach((function(t){var e=t.split(o),i=e.length,r=e[i-1],s="*"===r?"*":vt(r);if(dt[s]){a||(a=wt());var c=i>1?ot(lt,e):[];dt[s]=dt[s].map((function(t){var e=!n||t.method===n;return e&&t.scope===a&&st(t.mods,c)?{}:t}))}}))};function Lt(t,e,a){var n;if(e.scope===a||"all"===e.scope){for(var i in n=e.mods.length>0,ht)Object.prototype.hasOwnProperty.call(ht,i)&&(!ht[i]&&e.mods.indexOf(+i)>-1||ht[i]&&-1===e.mods.indexOf(+i))&&(n=!1);(0!==e.mods.length||ht[16]||ht[18]||ht[17]||ht[91])&&!n&&"*"!==e.shortcut||!1===e.method(t,e)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function Dt(t){var e=dt["*"],a=t.keyCode||t.which||t.charCode;if(Ot.filter.call(this,t)){if(93!==a&&224!==a||(a=91),-1===mt.indexOf(a)&&229!==a&&mt.push(a),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(e){var a=ut[e];t[e]&&-1===mt.indexOf(a)?mt.push(a):!t[e]&&mt.indexOf(a)>-1?mt.splice(mt.indexOf(a),1):"metaKey"===e&&t[e]&&3===mt.length&&(t.ctrlKey||t.shiftKey||t.altKey||(mt=mt.slice(mt.indexOf(a))))})),a in ht){for(var n in ht[a]=!0,lt)lt[n]===a&&(Ot[n]=!0);if(!e)return}for(var i in ht)Object.prototype.hasOwnProperty.call(ht,i)&&(ht[i]=t[ut[i]]);t.getModifierState&&(!t.altKey||t.ctrlKey)&&t.getModifierState("AltGraph")&&(-1===mt.indexOf(17)&&mt.push(17),-1===mt.indexOf(18)&&mt.push(18),ht[17]=!0,ht[18]=!0);var o=wt();if(e)for(var r=0;r<e.length;r++)e[r].scope===o&&("keydown"===t.type&&e[r].keydown||"keyup"===t.type&&e[r].keyup)&&Lt(t,e[r],o);if(a in dt)for(var s=0;s<dt[a].length;s++)if(("keydown"===t.type&&dt[a][s].keydown||"keyup"===t.type&&dt[a][s].keyup)&&dt[a][s].key){for(var c=dt[a][s],l=c.splitKey,u=c.key.split(l),h=[],d=0;d<u.length;d++)h.push(vt(u[d]));h.sort().join("")===mt.sort().join("")&&Lt(t,c,o)}}}function Tt(t){return yt.indexOf(t)>-1}function Ot(t,e,a){mt=[];var n=rt(t),i=[],o="all",r=document,s=0,c=!1,l=!0,u="+";for(void 0===a&&"function"===typeof e&&(a=e),"[object Object]"===Object.prototype.toString.call(e)&&(e.scope&&(o=e.scope),e.element&&(r=e.element),e.keyup&&(c=e.keyup),void 0!==e.keydown&&(l=e.keydown),"string"===typeof e.splitKey&&(u=e.splitKey)),"string"===typeof e&&(o=e);s<n.length;s++)t=n[s].split(u),i=[],t.length>1&&(i=ot(lt,t)),t=t[t.length-1],t="*"===t?"*":vt(t),t in dt||(dt[t]=[]),dt[t].push({keyup:c,keydown:l,scope:o,mods:i,shortcut:n[s],method:a,key:n[s],splitKey:u});"undefined"!==typeof r&&!Tt(r)&&window&&(yt.push(r),it(r,"keydown",(function(t){Dt(t)})),it(window,"focus",(function(){mt=[]})),it(r,"keyup",(function(t){Dt(t),St(t)})))}var Nt={setScope:gt,getScope:wt,deleteScope:kt,getPressedKeyCodes:bt,isPressed:Ct,filter:xt,unbind:_t};for(var zt in Nt)Object.prototype.hasOwnProperty.call(Nt,zt)&&(Ot[zt]=Nt[zt]);if("undefined"!==typeof window){var Mt=window.hotkeys;Ot.noConflict=function(t){return t&&window.hotkeys===Ot&&(window.hotkeys=Mt),Ot},window.hotkeys=Ot}var $t=Ot,Et=(a("c975"),function(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t&&e&&a&&t.addEventListener(e,a,n)}),Bt=function(t,e,a){t&&e&&a&&t.removeEventListener(e,a,!1)};function Rt(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}function jt(t,e){if(t){for(var a=t.className,n=(e||"").split(" "),i=0,o=n.length;i<o;i++){var r=n[i];r&&(t.classList?t.classList.add(r):Rt(t,r)||(a+=" "+r))}t.classList||(t.className=a)}}function At(t){return document.querySelector(t)}var Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout-ruler"},[a("div",{staticClass:"ruler-wrapper h-container",style:"transform: translateX(-"+t.hScroll+"px);"}),a("div",{staticClass:"ruler-wrapper v-container",style:"transform: rotate(90deg) translateX(-"+t.vScroll+"px);"}),a("div",{staticClass:"ruler-corner",attrs:{title:"切换参考线"},on:{click:t.toggleGuides}},[a("a-icon",{staticStyle:{"z-index":"9"},attrs:{type:"eye"}})],1)])},Ht=[];function Ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}a("7a82");function qt(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Gt(t,e,a){return e&&qt(t.prototype,e),a&&qt(t,a),t}var Xt=a("ade3"),Ft=(a("acd8"),a("b680"),a("c0b6"),a("4360")),Wt=function(t,e,a,n){var i=null!==t&&void 0!==t?t:document.createElement("canvas");i.width=e*n,i.height=a*n,i.style.width="".concat(e,"px"),i.style.height="".concat(a,"px");var o=i.getContext("2d");return o&&o.setTransform(n,0,0,n,0,0),i},Yt=function(t,e,a,n,i){var o,r,s,c=a.height,l=a.scale,u=a.offset;"TB"===a.direction?o=n-((null===(r=e.parentElement)||void 0===r?void 0:r.offsetLeft)||0)+t.scrollLeft:o=i-((null===(s=e.parentElement)||void 0===s?void 0:s.offsetTop)||0)+t.scrollTop;o=o-c+a.indicatorLineWidth;var h=Math.floor((o-u)/l);return{coor:h,dist:o}},Kt=function(t,e){var a=e.scale,n=e.offset;return{coor:t,dist:parseFloat((t*a+n).toFixed(3))}},Vt=function(){function t(e,a,n,i,o){Ut(this,t),Object(Xt["a"])(this,"wp",void 0),Object(Xt["a"])(this,"el",void 0),Object(Xt["a"])(this,"options",void 0),Object(Xt["a"])(this,"guideLine",void 0),Object(Xt["a"])(this,"coor",void 0),this.wp=e,this.el=a,this.options=n,this.constructGuide(i,o)}return Gt(t,[{key:"constructGuide",value:function(t,e){var a=this.el,n=document.createElement("div");n.title="双击删除参考线",jt(n,"ruler-line"),this.guideLine=n;var i=this.coor;this.setLine(t,e),t&&this.coorChange("add",this.coor,i);var o=a.querySelector(".lines-wrapper");o||(o=document.createElement("div"),jt(o,"lines-wrapper"),a.appendChild(o)),o.appendChild(n),Et(n,"mousedown",this.moving.bind(this)),Et(n,"dblclick",this.dblclick.bind(this))}},{key:"moving",value:function(t){var e=this,a=this.options;if(!(t.clientX<220||t.clientY<70)){t.preventDefault(),t.stopPropagation();var n=this.coor,i=function(t){"TB"===a.direction?document.body.style.cursor="col-resize":document.body.style.cursor="row-resize",e.setLine(t)},o=function t(){document.body.style.cursor="",Bt(document,"mousemove",i),Bt(document,"mouseup",t);var a=e.coor,o=0-Ft["a"].state.canvasConfig.padding;a<o?(e.destroy(),e.coorChange("delete",n,n)):e.coorChange("update",a,n)};Et(document,"mousemove",i),Et(document,"mouseup",o)}}},{key:"setLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.wp,n=this.el,i=this.options,o=this.guideLine,r=t?Yt(a,n,i,t.clientX,t.clientY):Kt(e,i);"TB"===i.direction?o.style.left="".concat(r.dist,"px"):o.style.top="".concat(r.dist,"px"),o.innerHTML='\n      <div class="line-action">\n        <span class="line-value">'.concat(r.coor,"</span>\n      </div>"),this.coor=r.coor}},{key:"dblclick",value:function(t){t.preventDefault(),t.stopPropagation(),this.destroy()}},{key:"coorChange",value:function(t,e,a){var n=this.options;n.coorChange&&n.coorChange(t,e,a)}},{key:"show",value:function(){this.guideLine.style.display="block"}},{key:"hide",value:function(){this.guideLine.style.display="none"}},{key:"destroy",value:function(){var t=this.guideLine,e=this.coor;this.coorChange("delete",e,e),Bt(t,"mousedown",this.moving.bind(this)),Bt(t,"dblclick",this.dblclick.bind(this)),t.remove()}}]),t}(),Jt=function(){function t(e,a){Ut(this,t),Object(Xt["a"])(this,"wp",void 0),Object(Xt["a"])(this,"el",void 0),Object(Xt["a"])(this,"canvas",void 0),Object(Xt["a"])(this,"ctx",void 0),Object(Xt["a"])(this,"ruler",{width:0,height:0}),Object(Xt["a"])(this,"indicator",void 0),Object(Xt["a"])(this,"indicatorValue",void 0),Object(Xt["a"])(this,"guideLines",[]),Object(Xt["a"])(this,"options",{direction:"TB",width:1e3,height:20,bgColor:"#0e1013",fontFamily:"arial",fontSize:"10px",fontColor:"#90a0ae",strokeStyle:"rgba(161, 174, 179, 0.8)",lineWidth:.5,indicatorLineWidth:1,scale:1,offset:44,ratio:2}),this.wp=At("#screenWrapper"),this.el=e,this.options=Object(r["a"])(Object(r["a"])({},this.options),a),this.constructRuler()}return Gt(t,[{key:"setSize",value:function(t,e,a){var n=this.el,i=this.options;i.width=t,i.height=e,i.scale=a;var o=i.direction,r=i.width,s=i.height,c=i.ratio,l="TB"===o?Math.max(n.offsetWidth,r):Math.max(n.offsetHeight,r),u=s;this.ruler.width=l,this.ruler.height=u,Wt(this.canvas,l,u,c),this.drawRuler(),this.guideLines.forEach((function(t){return t.setLine(null,t.coor)}))}},{key:"constructRuler",value:function(){var t=this.el,e=this.options,a=e.direction,n=e.width,i=e.height,o=e.ratio,r="TB"===a?Math.max(t.offsetWidth,n):Math.max(t.offsetHeight,n),s=i;this.ruler.width=r,this.ruler.height=s;var c=Wt(null,r,s,o);jt(c,"canvas-ruler"),t.appendChild(c),this.canvas=c,this.ctx=c.getContext("2d"),this.drawRuler(),Et(c,"mouseenter",this.constructIndicator.bind(this)),Et(c,"mousedown",this.createGuideLine.bind(this))}},{key:"drawRuler",value:function(){var t=this.ctx,e=this.options,a=this.ruler,n=a.width,i=a.height;t.beginPath(),t.fillStyle=e.bgColor,t.fillRect(0,0,n,i),t.closePath(),t.beginPath(),t.font="".concat(e.fontSize," ").concat(e.fontFamily),t.textAlign="left",t.fillStyle=e.fontColor,t.strokeStyle=e.strokeStyle,t.lineWidth=e.lineWidth,this.drawPoints(),t.stroke()}},{key:"drawPoints",value:function(){for(var t=this.ctx,e=this.options,a=this.ruler,n=a.width,i=a.height,o=e.offset,r=e.scale,s=0,c=i/1.5,l=i/1.2,u=0;u<=n;u+=1){var h=u-o;if(!(h<0)){var d=-1,f=-1;h%50===0?(d=Math.floor(h/r),f=s):h%25===0?f=c:h%5===0&&(f=l),f>=0&&(t.moveTo(u+.5,i+.5),t.lineTo(u+.5,f),d>-1&&t.fillText("".concat(d),u+2.5,i/1.5))}}}},{key:"constructIndicator",value:function(){var t=this.wp,e=this.el,a=this.options,n=this.canvas,i=document.createElement("div"),o=document.createElement("span");jt(i,"ruler-indicator"),jt(o,"indicator-value"),i.appendChild(o),this.indicator=i,this.indicatorValue=o,e.appendChild(i);var r=function(n){var r=Yt(t,e,a,n.clientX,n.clientY);i.style.left="".concat(r.dist,"px"),o.textContent="".concat(r.coor)},s=function t(){Bt(n,"mousemove",r),Bt(n,"mouseout",t),i.remove()};Et(n,"mousemove",r),Et(n,"mouseout",s)}},{key:"createGuideLine",value:function(t){t.preventDefault(),t.stopPropagation();var e=this.wp,a=this.el,n=this.options;this.guideLines.push(new Vt(e,a,n,t))}},{key:"toggleGuide",value:function(t){t?this.guideLines.forEach((function(t){return t.show()})):this.guideLines.forEach((function(t){return t.hide()}))}}]),t}(),Qt={name:"Ruler",data:function(){return{visible:!0,hRuler:null,vRuler:null,hScroll:0,vScroll:0}},computed:Object(u["mapState"])(["canvasConfig","screenConfig","currentItem"]),watch:{canvasConfig:{deep:!0,handler:function(){this.hRuler?this.hRuler.setSize(this.canvasConfig.width+100,20,this.canvasConfig.scale):this.initHRuler(),this.vRuler?this.vRuler.setSize(this.canvasConfig.width+100,20,this.canvasConfig.scale):this.initVRuler()}}},mounted:function(){this.initHRuler(),this.initVRuler(),Et(At("#screenWrapper"),"scroll",this.onScroll)},destroyed:function(){Bt(At("#screenWrapper"),"scroll",this.onScroll)},methods:{initHRuler:function(){this.hRuler=new Jt(At(".h-container"),{direction:"TB",width:this.canvasConfig.width+100,scale:this.canvasConfig.scale})},initVRuler:function(){this.vRuler=new Jt(At(".v-container"),{direction:"LR",width:this.canvasConfig.height+100,scale:this.canvasConfig.scale})},toggleGuides:function(){this.hRuler&&this.vRuler&&(this.visible=!this.visible,this.hRuler.toggleGuide(this.visible),this.vRuler.toggleGuide(this.visible))},onScroll:function(t){var e=t.target;this.hScroll=e.scrollLeft,this.vScroll=e.scrollTop}}},Zt=Qt,te=(a("f2bc"),a("2877")),ee=Object(te["a"])(Zt,Pt,Ht,!1,null,null,null),ae=ee.exports,ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"refline"},t._l(t.lines(),(function(e,n){return a("div",{key:n},["vertical"===e.type?a("div",{style:{position:"absolute",left:e.left+"px",top:e.top+"px",width:"0",height:e.size+"px",borderLeft:"1px dashed var(--color-primary)"}}):"horizontal"===e.type?a("div",{style:{position:"absolute",left:e.left+"px",top:e.top+"px",height:"0",width:e.size+"px",borderTop:"1px dashed var(--color-primary)"}}):t._e()])})),0)},ie=[],oe={name:"Refline",computed:Object(u["mapState"])(["refline"]),methods:{lines:function(){return[]}}},re=oe,se=(a("75af"),Object(te["a"])(re,ne,ie,!1,null,null,null)),ce=se.exports,le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"area",style:{left:t.start.x+"px",top:t.start.y+"px",width:t.width+"px",height:t.height+"px"},on:{mousedown:t.handleAreaChoose}})},ue=[],he=a("b85c"),de=(a("a9e3"),{props:{start:{type:Object,default:function(){return{x:0,y:0}}},width:{type:Number,default:0},height:{type:Number,default:0}},computed:Object(u["mapState"])(["items","groupIndex","canvasConfig"]),methods:{handleAreaChoose:function(t){var e=this;t.preventDefault(),t.stopPropagation();var a=this.canvasConfig.scale,n=t.clientX,i=t.clientY,o=!1,r=function(t){o=!0,e.setCursor("move");var r,s=Math.round((t.clientX-n)/a),c=Math.round((t.clientY-i)/a),l=Object(he["a"])(e.groupIndex);try{for(l.s();!(r=l.n()).done;){var u=r.value;e.items[u].x+=s,e.items[u].y+=c}}catch(h){l.e(h)}finally{l.f()}e.start.x+=Math.round((t.clientX-n)/a)*a,e.start.y+=Math.round((t.clientY-i)/a)*a,n=t.clientX,i=t.clientY},s=function t(){Bt(document,"mousemove",r),Bt(document,"mouseup",t),e.setCursor(""),o&&e.$store.dispatch("recordSnapshot")};Et(document,"mousemove",r),Et(document,"mouseup",s)},setCursor:function(t){document.body.style.cursor=t}}}),fe=de,me=(a("16aa"),Object(te["a"])(fe,le,ue,!1,null,null,null)),pe=me.exports,ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.contextmenuShow,expression:"contextmenuShow"}],style:t.style()},[a("ul",{staticClass:"ant-dropdown-menu",on:{mouseup:t.handleMouseup}},[t.currentItem?[a("li",{staticClass:"ant-dropdown-menu-item"},[a("a-icon",{attrs:{type:"vertical-align-top"}}),t._v(" 置顶 ")],1),a("li",{staticClass:"ant-dropdown-menu-item"},[a("a-icon",{attrs:{type:"vertical-align-bottom"}}),t._v(" 置底 ")],1),a("li",{staticClass:"ant-dropdown-menu-item"},[a("a-icon",{attrs:{type:"arrow-up"}}),t._v(" 上移一层 ")],1),a("li",{staticClass:"ant-dropdown-menu-item"},[a("a-icon",{attrs:{type:"arrow-down"}}),t._v(" 下移一层 ")],1),a("li",{staticClass:"ant-dropdown-menu-item-divider"}),a("li",{staticClass:"ant-dropdown-menu-item"},[a("a-icon",{attrs:{type:"eye-invisible"}}),t._v(" 隐藏 ")],1),a("li",{staticClass:"ant-dropdown-menu-item-divider"}),a("li",{staticClass:"ant-dropdown-menu-item",on:{click:t.copy}},[a("a-icon",{attrs:{type:"copy"}}),t._v(" 复制 ")],1),a("li",{staticClass:"ant-dropdown-menu-item",on:{click:t.deleteItem}},[a("a-icon",{attrs:{type:"delete"}}),t._v(" 删除 ")],1)]:[a("li",{staticClass:"ant-dropdown-menu-item",on:{click:t.paste}},[a("a-icon",{attrs:{type:"copy"}}),t._v(" 粘贴 ")],1)]],2)])},ve=[],ge={name:"Contextmenu",computed:Object(u["mapState"])(["currentItem","contextmenuShow","contextmenuTop","contextmenuLeft"]),methods:{style:function(){return{zIndex:9999,position:"absolute",top:"".concat(this.contextmenuTop,"px"),left:"".concat(this.contextmenuLeft,"px")}},handleMouseup:function(){this.$store.commit("setClickItem",!0)},copy:function(){this.$store.commit("itemCopy")},paste:function(){this.$store.commit("itemPaste",!0)},deleteItem:function(){this.$store.commit("deleteItem")}}},we=ge,be=Object(te["a"])(we,ye,ve,!1,null,null,null),xe=be.exports,Ce={name:"Layout",components:{Ruler:ae,Refline:ce,ChooseArea:pe,Contextmenu:xe},data:function(){return{imageBasicUrl:d["a"].imageBasicUrl,areaStart:{x:0,y:0},areaSize:{width:0,height:0}}},computed:Object(u["mapState"])(["items","currentItem","canvasConfig","screenConfig","groupAreaShow"]),watch:{areaSize:{deep:!0,handler:function(t){var e=this;this.items.forEach((function(a,n){if("true"!==a.lock){var i=e.$refs.layout.getBoundingClientRect(),o=At("[id='".concat(a.elId,"']")).getBoundingClientRect(),r=o.x-i.x+e.canvasConfig.padding,s=o.y-i.y+e.canvasConfig.padding,c=o.width,l=o.height,u=e.areaStart.y<=s,h=e.areaStart.x<=r,d=r+c<=e.areaStart.x+t.width,f=s+l<=e.areaStart.y+t.height,m=u&&h&&d&&f;m?e.$store.commit("addGroupIndex",n):e.$store.commit("deleteGroupIndex",n),e.$store.commit("setHoverItem",{index:n,status:m})}}))}}},mounted:function(){var t=this;$t("ctrl+c, ctrl+v",(function(e,a){switch(a.key){case"ctrl+c":t.$store.commit("itemCopy");break;case"ctrl+v":t.$store.commit("itemPaste",!1);break}})),$t("up, down, left, right",(function(e,a){if(t.currentItem)switch(a.key){case"up":t.currentItem.style.y-=1;break;case"down":t.currentItem.style.y+=1;break;case"left":t.currentItem.style.x-=1;break;case"right":t.currentItem.style.x+=1;break}}))},beforeDestroy:function(){$t.unbind("ctrl+c, ctrl+v"),$t.unbind("up, down, left, right")},methods:{layoutStyle:function(){var t={width:"".concat(this.screenConfig.width,"px"),height:"".concat(this.screenConfig.height,"px"),transform:"scale(".concat(this.canvasConfig.scale,") translate(0px, 0px)"),backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"};return 0!==this.screenConfig.backgroundImg.length?t.backgroundImage="url(".concat(this.imageBasicUrl).concat(this.screenConfig.backgroundImg,")"):t.background="#263546",t},screenWrapperStyle:function(){return{width:"".concat(this.canvasConfig.width,"px"),height:"".concat(this.canvasConfig.height,"px")}},handleContextmenu:function(t){t.stopPropagation(),t.preventDefault();var e=this.$refs.layout.getBoundingClientRect();this.$store.commit("showContextmenu",{top:t.clientY-e.y+this.canvasConfig.padding,left:t.clientX-e.x+this.canvasConfig.padding})},handleMousedown:function(t){var e=this;this.currentItem||t.preventDefault(),this.hideArea();var a=this.$refs.layout.getBoundingClientRect();this.areaStart.x=t.clientX-a.x+this.canvasConfig.padding,this.areaStart.y=t.clientY-a.y+this.canvasConfig.padding,this.showArea();var n=function(n){e.areaSize.width=Math.abs(n.clientX-t.clientX),e.areaSize.height=Math.abs(n.clientY-t.clientY),n.clientX<t.clientX&&(e.areaStart.x=n.clientX-a.x+e.canvasConfig.padding),n.clientY<t.clientY&&(e.areaStart.y=n.clientY-a.y+e.canvasConfig.padding)},i=function a(i){Bt(document,"mousemove",n),Bt(document,"mouseup",a),i.clientX-t.clientX<=10&&i.clientY-t.clientY<=10?e.hideArea():e.createGroup()};Et(document,"mousemove",n),Et(document,"mouseup",i)},showArea:function(){this.$store.commit("setGroupAreaShow",!0)},hideArea:function(){this.areaSize.width=0,this.areaSize.height=0,this.$store.commit("setGroupAreaShow",!1)},createGroup:function(){}}},ke=Ce,Se=Object(te["a"])(ke,et,at,!1,null,null,null),_e=Se.exports,Ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:"true"===t.item.show,expression:"item.show === 'true'"}],staticClass:"data-view-item",class:{active:t.active},style:t.itemStyle,on:{click:t.handleItemClick,mousedown:function(e){return e.preventDefault(),e.stopPropagation(),t.handleMove.apply(null,arguments)}}},[a("div",{staticClass:"data-view-item-handler",class:t.itemHandlerClass(),style:{transform:"rotate("+t.item.style.rotate+"deg)"},on:{mouseenter:function(e){t.item.hover=!0},mouseleave:function(e){t.item.hover=!1}}},[a("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.isActive(),expression:"isActive()"}],staticClass:"rotate-handler",attrs:{type:"reload"},on:{mousedown:function(e){return e.preventDefault(),e.stopPropagation(),t.handleRotate.apply(null,arguments)}}}),a("div",{staticClass:"resize-handler"},t._l(t.points(),(function(e,n){return a("i",{key:n,staticClass:"drag-dot",style:e.style,on:{mousedown:function(e){return e.preventDefault(),e.stopPropagation(),t.handleResize(e,n)}}})})),0),t._t("default")],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive()&&t.canvasConfig.indicatorLine&&t.moving,expression:"isActive() && canvasConfig.indicatorLine && moving"}],staticClass:"indicator-lines"},[a("span",{staticClass:"x-line",style:t.lineXStyle}),a("span",{staticClass:"y-line",style:t.lineYStyle}),a("span",{staticClass:"coordinate"},[t._v(t._s(t.item.style.x)+"，"+t._s(t.item.style.y))])])])},Le=[],De=a("61da");function Te(t){return t*Math.PI/180}function Oe(t,e,a){return{x:(t.x-e.x)*Math.cos(Te(a))-(t.y-e.y)*Math.sin(Te(a))+e.x,y:(t.x-e.x)*Math.sin(Te(a))+(t.y-e.y)*Math.cos(Te(a))+e.y}}function Ne(t,e){return{x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2}}function ze(t){return(t+360)%360}var Me=[{direction:"lt",angle:0},{direction:"t",angle:45},{direction:"rt",angle:90},{direction:"r",angle:135},{direction:"rb",angle:180},{direction:"b",angle:225},{direction:"lb",angle:270},{direction:"l",angle:315}],$e=[{start:338,end:23,cursor:"nwse-resize"},{start:23,end:68,cursor:"ns-resize"},{start:68,end:113,cursor:"nesw-resize"},{start:113,end:158,cursor:"ew-resize"},{start:158,end:203,cursor:"nwse-resize"},{start:203,end:248,cursor:"ns-resize"},{start:248,end:293,cursor:"nesw-resize"},{start:293,end:338,cursor:"ew-resize"}];function Ee(t){t=ze(t);var e={},a=-1;return Me.forEach((function(n){for(var i=(n.angle+t)%360;;){a=(a+1)%$e.length;var o=$e[a];if(i<23||i>=338){e[n.direction]="nwse-resize";break}if(o.start<=i&&i<o.end){e[n.direction]=o.cursor;break}}})),e}function Be(t,e,a,n){var i=n.x-a.x,o=n.y-a.y,r=/t/.test(t),s=/b/.test(t),c=/l/.test(t),l=/r/.test(t),u=Math.round(e.height+(r?-o:s?o:0)/e.scale),h=Math.round(e.width+(c?-i:l?i:0)/e.scale),d={};return d.x=Math.round(e.x+(c?i:0)/e.scale),d.y=Math.round(e.y+(r?o:0)/e.scale),d.height=u>0?u:0,d.width=h>0?h:0,d}function Re(t,e,a,n,i){var o={};if(2===t.length){var r=Ne(i,n),s=Oe(n,r,-e.rotate),c=Oe(i,r,-e.rotate);return"l"===t[0]?(o.x=Math.round(c.x/e.scale),o.width=Math.round((s.x-c.x)/e.scale)):"r"===t[0]&&(o.x=Math.round(s.x/e.scale),o.width=Math.round((c.x-s.x)/e.scale)),"t"===t[1]?(o.y=Math.round(c.y/e.scale),o.height=Math.round((s.y-c.y)/e.scale)):"b"===t[1]&&(o.y=Math.round(s.y/e.scale),o.height=Math.round((c.y-s.y)/e.scale)),o}var l=Oe(i,a,-e.rotate);if("t"===t||"b"===t){var u=Oe({x:a.x,y:l.y},a,e.rotate),h=Math.sqrt(Math.pow(u.x-n.x,2)+Math.pow(u.y-n.y,2));if(h>0){var d={x:u.x-(u.x-n.x)/2,y:u.y+(n.y-u.y)/2};o.width=e.width,o.height=Math.round(h/e.scale),o.x=Math.round(d.x/e.scale-e.width/2),o.y=Math.round((d.y-h/2)/e.scale)}}if("l"===t||"r"===t){var f=Oe({x:l.x,y:a.y},a,e.rotate),m=Math.sqrt(Math.pow(f.x-n.x,2)+Math.pow(f.y-n.y,2));if(m>0){var p={x:f.x-(f.x-n.x)/2,y:f.y+(n.y-f.y)/2};o.width=Math.round(m/e.scale),o.height=e.height,o.x=Math.round((p.x-m/2)/e.scale),o.y=Math.round(p.y/e.scale-e.height/2)}}return o}var je={name:"Item",props:{active:{type:Boolean,default:!1},item:{type:Object,default:function(){return{}}},index:{type:Number,default:function(){return 0}}},data:function(){return{}},computed:Object(r["a"])({itemStyle:function(){return{zIndex:this.index+9,top:0,left:0,width:"".concat(this.item.style.width,"px"),height:"".concat(this.item.style.height,"px"),transform:"translate(".concat(this.item.style.x,"px, ").concat(this.item.style.y,"px)")}},lineXStyle:function(){return{width:"".concat(this.item.style.x/this.canvasConfig.scale,"px"),borderWidth:"".concat(1/this.canvasConfig.scale,"px")}},lineYStyle:function(){return{height:"".concat(this.item.style.y/this.canvasConfig.scale,"px"),borderWidth:"".concat(1/this.canvasConfig.scale,"px")}}},Object(u["mapState"])(["moving","resizing","canvasConfig","screenConfig"])),mounted:function(){},methods:{itemHandlerClass:function(){return{hover:!this.isActive()&&!this.resizing&&this.item.hover}},isActive:function(){return this.active},points:function(){var t=Ee(this.item.style.rotate),e="scale(".concat(1/this.canvasConfig.scale,", ").concat(1/this.canvasConfig.scale,")");return{t:{name:"top",style:{top:"-4px",left:"50%",marginLeft:"-4px",cursor:t.t,transform:e}},rt:{name:"top-right",style:{top:"-4px",right:"-4px",cursor:t.rt,transform:e}},r:{name:"right",style:{top:"50%",right:"-4px",marginTop:"-4px",cursor:t.r,transform:e}},rb:{name:"bottom-right",style:{right:"-4px",bottom:"-4px",cursor:t.rb,transform:e}},b:{name:"bottom",style:{left:"50%",bottom:"-4px",marginLeft:"-4px",cursor:t.b,transform:e}},lb:{name:"bottom-left",style:{left:"-4px",bottom:"-4px",cursor:t.lb,transform:e}},l:{name:"left",style:{top:"50%",left:"-4px",marginTop:"-4px",cursor:t.l,transform:e}},lt:{name:"top-left",style:{top:"-4px",left:"-4px",cursor:t.lt,transform:e}}}},handleItemClick:function(t){t.stopPropagation(),t.preventDefault(),this.$store.commit("hideContextmenu")},handleItemChoose:function(){this.$store.commit("setClickItem",!0),this.$store.commit("setCurrentItem",{item:this.item,index:this.index}),De["a"].$emit("layer:itemChange")},handleRotate:function(t){var e=this;t.preventDefault(),t.stopPropagation();var a=this.$el.getBoundingClientRect(),n=a.left+a.width/2,i=a.top+a.height/2,o=180*Math.atan2(i-t.clientY,n-t.clientX)/Math.PI-this.item.style.rotate,r=!1,s=function(t){r=!0,e.setCursor("grab");var a=180*Math.atan2(i-t.clientY,n-t.clientX)/Math.PI-o,s=Math.round(a%360);e.setItemPosition({rotate:s<0?s+360:s})},c=function t(){Bt(document,"mousemove",s),Bt(document,"mouseup",t),e.setCursor(""),r&&e.$store.dispatch("recordSnapshot")};Et(document,"mousemove",s),Et(document,"mouseup",c)},handleResize:function(t,e){var a=this;t.preventDefault(),t.stopPropagation(),this.handleItemChoose();var n,i=Ee(this.item.style.rotate),o=Object(r["a"])(Object(r["a"])({},this.item.style),{},{scale:this.canvasConfig.scale}),s=!1;if(0===this.item.style.rotate||360===this.item.style.rotate)n=function(n){s=!0,a.setCursor(i[e]),a.$store.commit("setResizeStatus",!0);var r=Be(e,o,{x:t.clientX,y:t.clientY},{x:n.clientX,y:n.clientY});a.setItemPosition(r)};else{var c={x:(o.x+o.width/2)*o.scale,y:(o.y+o.height/2)*o.scale},l=document.querySelector("#data-view-layout").getBoundingClientRect(),u=t.target.getBoundingClientRect(),h={x:Math.round(u.left-l.left+t.target.offsetWidth/2),y:Math.round(u.top-l.top+t.target.offsetHeight/2)},d={x:c.x-(h.x-c.x),y:c.y-(h.y-c.y)};n=function(t){s=!0,a.setCursor(i[e]),a.$store.commit("setResizeStatus",!0);var n=Re(e,o,h,d,{x:t.clientX-l.left,y:t.clientY-l.top});a.setItemPosition(n)}}var f=function t(){Bt(document,"mousemove",n),Bt(document,"mouseup",t),a.setCursor(""),a.$store.commit("setResizeStatus",!1),s&&a.$store.dispatch("recordSnapshot")};Et(document,"mousemove",n),Et(document,"mouseup",f)},handleMove:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.handleItemChoose();var a=this.canvasConfig.scale,n=Object(r["a"])({},this.item.style),i={},o=!1,s=function(s){o=!0,e.setCursor("move"),e.$store.commit("setMoveStatus",!0),i.x=n.x+Math.round((s.clientX-t.clientX)/a),i.y=n.y+Math.round((s.clientY-t.clientY)/a),e.item.style=Object(r["a"])(Object(r["a"])({},e.item.style),i)},c=function t(){Bt(document,"mousemove",s),Bt(document,"mouseup",t),e.setCursor(""),e.$store.commit("setMoveStatus",!1),o&&e.$store.dispatch("recordSnapshot")};Et(document,"mousemove",s),Et(document,"mouseup",c)},setItemPosition:function(t){t.x&&(this.item.style.x=t.x),t.y&&(this.item.style.y=t.y),t.width&&(this.item.style.width=t.width),t.height&&(this.item.style.height=t.height),t.rotate&&(this.item.style.rotate=t.rotate)},setCursor:function(t){document.body.style.cursor=t}}},Ae=je,Pe=Object(te["a"])(Ae,Ie,Le,!1,null,null,null),He=Pe.exports,Ue=a("4699"),qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-view-layer"},[a("div",{staticClass:"layer-header"},[t._v("图层")]),a("div",{staticClass:"layer-wrapper",on:{dragover:function(e){return t.dragover(e)}}},[a("transition-group",{attrs:{name:"drag",tag:"div"}},[t._l(t.items,(function(e,n){return[a("a-dropdown",{key:e.elId,attrs:{trigger:["contextmenu"]}},[a("div",{class:["layer-item",{active:e===t.currentItem}],attrs:{id:"layer-"+e.elId,draggable:!0},on:{mousedown:function(a){return t.handleSelect(e,n)},mouseenter:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1},dragstart:function(e){return t.dragstart(n)},dragenter:function(e){return t.dragenter(e,n)},dragend:function(e){return t.dragend(e)}}},[a("div",{staticClass:"layer-item-icon"},[a("icon",{attrs:{type:"icon-"+e.type+"New"}})],1),a("div",{staticClass:"layer-item-label"},["TitleText"===e.type?a("span",[t._v(t._s(e.option.title))]):"ImageChart"===e.type||"CarouselList"===e.type||"Counter"===e.type?a("span",[t._v(t._s(e.name))]):a("span",[0!==e.name.length?a("span",[t._v(" "+t._s(e.name)+" ")]):a("span",[t._v(" "+t._s(e.option.title.text)+" ")])])])]),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{on:{click:function(e){return t.handleTop(n)}}},[a("a-icon",{attrs:{type:"vertical-align-top"}}),t._v("置顶")],1),a("a-menu-item",{on:{click:function(e){return t.handleBottom(n)}}},[a("a-icon",{attrs:{type:"vertical-align-bottom"}}),t._v("置底")],1),a("a-menu-item",{on:{click:function(e){return t.handleUp(n)}}},[a("a-icon",{attrs:{type:"arrow-up"}}),t._v("上移一层")],1),a("a-menu-item",{on:{click:function(e){return t.handleDown(n)}}},[a("a-icon",{attrs:{type:"arrow-down"}}),t._v("下移一层")],1),a("a-menu-divider"),"false"===e.lock?a("a-menu-item",{on:{click:function(t){e.lock="true"}}},[a("a-icon",{attrs:{type:"lock"}}),t._v("锁定")],1):t._e(),"true"===e.lock?a("a-menu-item",{on:{click:function(t){e.lock="false"}}},[a("a-icon",{attrs:{type:"unlock"}}),t._v("解锁")],1):t._e(),"true"===e.show?a("a-menu-item",{on:{click:function(t){e.show="false"}}},[a("a-icon",{attrs:{type:"eye-invisible"}}),t._v("隐藏")],1):t._e(),"false"===e.show?a("a-menu-item",{on:{click:function(t){e.show="true"}}},[a("a-icon",{attrs:{type:"eye"}}),t._v("显示")],1):t._e(),a("a-menu-divider"),a("a-menu-item",{on:{click:function(e){return t.handleCopy(n)}}},[a("a-icon",{attrs:{type:"copy"}}),t._v("复制")],1),a("a-menu-item",{on:{click:function(e){return t.handleDelete(n)}}},[a("a-icon",{attrs:{type:"delete"}}),t._v("删除")],1)],1)],1)]}))],2),a("div",{attrs:{id:"indicator"}})],1)])},Ge=[],Xe={name:"Layer",data:function(){return{dragIndex:"",enterIndex:""}},computed:Object(u["mapState"])(["items","currentItem"]),mounted:function(){var t=this;De["a"].$on("layer:itemChange",(function(){null!==t.currentItem&&At("#layer-".concat(t.currentItem.elId)).scrollIntoView({behavior:"smooth"})}))},methods:{dragstart:function(t){this.dragIndex=t},dragenter:function(t,e){t.preventDefault(),this.enterIndex=e;var a=48,n=At("#indicator");n.style.display="block",n.style.top="".concat(a*e,"px"),t.dataTransfer.setDragImage(n,0,0)},dragend:function(t){t.preventDefault(),this.$store.commit("exchangeItem",{start:this.dragIndex,end:this.enterIndex});var e=At("#indicator");e.style.display="none"},dragover:function(t){t.preventDefault()},handleSelect:function(t,e){this.$store.commit("setCurrentItem",{item:t,index:e})},handleTop:function(t){this.$store.commit("moveItem",{i:t,type:"top"})},handleBottom:function(t){this.$store.commit("moveItem",{i:t,type:"bottom"})},handleUp:function(t){this.$store.commit("moveItem",{i:t,type:"up"})},handleDown:function(t){this.$store.commit("moveItem",{i:t,type:"down"})},handleCopy:function(t){},handleDelete:function(t){}}},Fe=Xe,We=(a("0096"),Object(te["a"])(Fe,qe,Ge,!1,null,null,null)),Ye=We.exports,Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:[t.showData()?"three":"two"]},[a("a-tabs",[a("a-tab-pane",{key:"style",attrs:{tab:"样式"}},[a("div",{staticClass:"info"},[a("span",{staticClass:"title"},[a("span",[t._v(t._s(t.currentItem.name)+" "),a("span",{staticClass:"version"},[t._v("[v"+t._s(t.currentItem.version)+"]")])]),a("span",{staticClass:"update"},[t._v("更新版本")])]),a("span",{staticClass:"doc"},[a("a-space",{attrs:{size:20}},[a("a-button",{attrs:{icon:"question-circle",size:"small",type:"primary",ghost:!0}},[t._v("组件手册")]),a("a-button",{attrs:{icon:"search",size:"small",type:"primary",ghost:!0}},[t._v("搜索配置")])],1)],1)]),a("a-collapse",{attrs:{bordered:!1,"default-active-key":"基础配置"}},[a("a-collapse-panel",{key:"基础配置",attrs:{header:"基础配置"}},[a("a-form",{attrs:{layout:"horizontal","label-col":{span:6},"wrapper-col":{span:14,offset:1}}},[a("a-form-item",{attrs:{label:"位置"}},[a("a-row",{attrs:{gutter:20}},[a("a-col",{attrs:{span:12}},[a("a-input-number",{attrs:{min:0,precision:0},model:{value:t.currentItem.style.x,callback:function(e){t.$set(t.currentItem.style,"x",e)},expression:"currentItem.style.x"}})],1),a("a-col",{attrs:{span:12}},[a("a-input-number",{attrs:{min:0,precision:0},model:{value:t.currentItem.style.y,callback:function(e){t.$set(t.currentItem.style,"y",e)},expression:"currentItem.style.y"}})],1)],1)],1),a("a-form-item",{attrs:{label:"大小"}},[a("a-row",{attrs:{gutter:20}},[a("a-col",{attrs:{span:12}},[a("a-input-number",{attrs:{min:0,precision:0},model:{value:t.currentItem.style.width,callback:function(e){t.$set(t.currentItem.style,"width",e)},expression:"currentItem.style.width"}})],1),a("a-col",{attrs:{span:12}},[a("a-input-number",{attrs:{min:0,precision:0},model:{value:t.currentItem.style.height,callback:function(e){t.$set(t.currentItem.style,"height",e)},expression:"currentItem.style.height"}})],1)],1)],1),a("a-form-item",{attrs:{label:"旋转角度"}},[a("a-input-number",{attrs:{min:0,max:360,precision:0},model:{value:t.currentItem.style.rotate,callback:function(e){t.$set(t.currentItem.style,"rotate",e)},expression:"currentItem.style.rotate"}})],1)],1)],1)],1),a(t.currentItem.type+"Option_"+t.currentItem.version,{tag:"component",attrs:{item:t.currentItem}})],1),a("a-tab-pane",{key:"attribute",attrs:{tab:"属性","force-render":!0}},[a("a-form",{attrs:{layout:"horizontal","label-col":{span:6},"wrapper-col":{span:14,offset:1}}},[a("a-form-item",{attrs:{label:"是否锁定"}},[a("a-select",{model:{value:t.currentItem.lock,callback:function(e){t.$set(t.currentItem,"lock",e)},expression:"currentItem.lock"}},[a("a-select-option",{attrs:{value:"false"}},[t._v("不锁定")]),a("a-select-option",{attrs:{value:"true"}},[t._v("锁定")])],1)],1)],1)],1),t.showData()?a("a-tab-pane",{key:"data",attrs:{tab:"数据","force-render":!0}},[a("a-form",{staticClass:"chart-data-option",attrs:{layout:"horizontal","label-col":{span:6},"wrapper-col":{span:14,offset:1}}},[a("a-form-item",{attrs:{label:"数据源类型"}},[a("a-select",{on:{change:t.handleConfigChange},model:{value:t.currentItem.chartData.dataSourceType,callback:function(e){t.$set(t.currentItem.chartData,"dataSourceType",e)},expression:"currentItem.chartData.dataSourceType"}},t._l(t.dataSourceTypeList,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1),"Static"===t.currentItem.chartData.dataSourceType?[a("code-editor",{ref:"staticData",attrs:{id:"staticData",language:"json",value:t.currentItem.chartData.staticData},on:{change:t.handleStaticDataChange,blur:t.handleConfigChange}},[a("icon",{staticClass:"fullscreen",attrs:{type:"icon-fullscreen-expand"},on:{click:function(e){t.visibleStaticDataModel=!0}}})],1)]:"DataBase"===t.currentItem.chartData.dataSourceType?[a("a-form-item",{attrs:{label:"数据源"}},[a("a-select",{on:{change:t.handleConfigChange},model:{value:t.currentItem.chartData.database,callback:function(e){t.$set(t.currentItem.chartData,"database",e)},expression:"currentItem.chartData.database"}},t._l(t.dataSourceList,(function(e){return a("a-select-option",{key:e.data_source_id,attrs:{value:e.data_source_id}},[t._v(" "+t._s(e.data_source_name)+" ")])})),1)],1),t._l(t.params(),(function(e,n){return a("a-form-item",{key:n,attrs:{label:e.label}},[a("a-input",{on:{change:t.handleConfigChange},model:{value:t.currentItem.chartData[e.value],callback:function(a){t.$set(t.currentItem.chartData,e.value,a)},expression:"currentItem.chartData[param.value]"}})],1)})),a("a-form-item",{attrs:{label:"SQL"}},[a("a-textarea",{model:{value:t.currentItem.chartData.sql,callback:function(e){t.$set(t.currentItem.chartData,"sql",e)},expression:"currentItem.chartData.sql"}})],1),a("a-form-item",[a("a-button",{attrs:{type:"primary",size:"small"}},[t._v("调试SQL")])],1)]:"Rest"===t.currentItem.chartData.dataSourceType?[a("a-form-item",{attrs:{label:"请求类型"}},[a("a-radio-group",{model:{value:t.currentItem.chartData.restType,callback:function(e){t.$set(t.currentItem.chartData,"restType",e)},expression:"currentItem.chartData.restType"}},[a("a-radio",{style:{width:"100%",height:"35px",lineHeight:"35px"},attrs:{value:"GET"}},[a("span",{staticStyle:{"word-break":"break-all","white-space":"pre-wrap"}},[t._v("GET")])]),a("a-radio",{style:{width:"100%",height:"35px",lineHeight:"35px"},attrs:{value:"POST"}},[a("span",{staticStyle:{"word-break":"break-all","white-space":"pre-wrap"}},[t._v("POST")])])],1)],1),a("a-form-item",{attrs:{label:"接口地址"}},[a("a-input",{on:{blur:t.handleConfigChange},model:{value:t.currentItem.chartData.restUrl,callback:function(e){t.$set(t.currentItem.chartData,"restUrl",e)},expression:"currentItem.chartData.restUrl"}})],1),a("a-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleEditRest}},[t._v("调试API")])]:"Csv"===t.currentItem.chartData.dataSourceType?void 0:t._e()],2)],1):t._e()],1),a("div",{staticStyle:{display:"none"}},[a("div",{attrs:{id:"rest-data"}},[a("div",{staticClass:"modal-form-item dark-theme"},[a("div",{staticClass:"label"},[t._v("请求接口地址")]),a("div",{staticClass:"control-wrapper"},[a("a-row",{attrs:{gutter:30}},[a("a-col",{attrs:{span:12}},[a("a-input",[a("a-select",{staticStyle:{width:"80px"},attrs:{slot:"addonBefore","default-value":"Http://"},slot:"addonBefore"},[a("a-select-option",{attrs:{value:"Http://"}},[t._v("Http://")]),a("a-select-option",{attrs:{value:"Https://"}},[t._v("Https://")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-button",{attrs:{type:"primary"}},[t._v("发送请求")])],1)],1)],1)]),a("a-tabs",{attrs:{"default-active-key":"1"}},[a("a-tab-pane",{key:"Cookie",attrs:{tab:"Cookie"}},[t._v(" Cookie ")]),a("a-tab-pane",{key:"请求头参数",attrs:{tab:"请求头参数","force-render":!0}},[t._v(" 请求头参数 ")]),a("a-tab-pane",{key:"请求体参数",attrs:{tab:"请求体参数(JSON)","force-render":!0}},[a("div",{staticClass:"control-wrapper"},[a("code-editor",{attrs:{id:"rest-data-body",language:"json",height:"250px",value:t.currentItem.chartData.restBody}})],1)])],1),a("a-row",{attrs:{gutter:30}},[a("a-col",{attrs:{span:24}},[a("div",{staticClass:"modal-form-item"},[a("div",{staticClass:"label"},[t._v("请求结果(JSON)")]),a("div",{staticClass:"control-wrapper"})])])],1)],1)])],1)},Ve=[];const Je=document.createElement("div");Je.innerHTML="<div class=wb-header><div class=wb-icon><span class=wb-min></span><span class=wb-max></span><span class=wb-full></span><span class=wb-close></span></div><div class=wb-title> </div></div><div class=wb-body></div><div class=wb-n></div><div class=wb-s></div><div class=wb-w></div><div class=wb-e></div><div class=wb-nw></div><div class=wb-ne></div><div class=wb-se></div><div class=wb-sw></div>";var Qe=function(){return Je.cloneNode(!0)};function Ze(t,e,a,n){t.addEventListener(e,a,!n&&!1!==n||n)}function ta(t,e,a,n){t.removeEventListener(e,a,!n&&!1!==n||n)}function ea(t,e){t.stopPropagation(),t.cancelable&&t.preventDefault()}function aa(t,e){return t.getElementsByClassName(e)[0]}function na(t,e){t.classList.add(e)}function ia(t,e){t.classList.remove(e)}function oa(t,e,a){a=""+a,t["_s_"+e]!==a&&(t.style.setProperty(e,a),t["_s_"+e]=a)}function ra(t,e){t.firstChild.nodeValue=e}const sa=!1,ca=[];let la,ua,ha,da,fa,ma,pa,ya,va=0,ga=0;function wa(t,e){if(!(this instanceof wa))return new wa(t);let a,n,i,o,r,s,c,l,u,h,d,f,m,p,y,v,g,w,b,x,C,k,S,_,I,L,D;ua||Ca(),this.dom=Qe(),this.body=aa(this.dom,"wb-body"),t&&(e&&(i=t,t=e),"string"===typeof t?i=t:((w=t["modal"])&&(d=f="center"),a=t["id"],n=t["root"],i=i||t["title"],o=t["mount"],r=t["html"],s=t["url"],c=t["width"],l=t["height"],u=t["minwidth"],h=t["minheight"],d=t["x"]||d,f=t["y"]||f,m=t["max"],p=t["top"],y=t["left"],v=t["bottom"],g=t["right"],ua=t["index"]||ua,b=t["onclose"],x=t["onfocus"],C=t["onblur"],k=t["onmove"],S=t["onresize"],_=t["background"],I=t["border"],L=t["class"],D=t["splitscreen"],_&&this.setBackground(_),I&&oa(this.body,"margin",I+(isNaN(I)?"":"px")))),this.setTitle(i||"");let T=pa,O=ya;p=p?xa(p,O):0,v=v?xa(v,O):0,y=y?xa(y,T):0,g=g?xa(g,T):0,T-=y+g,O-=p+v,c=c?xa(c,T):T/2|0,l=l?xa(l,O):O/2|0,u=u?xa(u,T):0,h=h?xa(h,O):0,d=d?xa(d,T,c):y,f=f?xa(f,O,l):p,ua=ua||10,this.dom.id=this.id=a||"winbox-"+ ++va,this.dom.className="winbox"+(L?" "+("string"===typeof L?L:L.join(" ")):"")+(w?" modal":""),this.x=d,this.y=f,this.width=c,this.height=l,this.minwidth=u,this.minheight=h,this.top=p,this.right=g,this.bottom=v,this.left=y,this.border=I,this.min=!1,this.max=!1,this.onclose=b,this.onfocus=x,this.onblur=C,this.onmove=k,this.onresize=S,this.splitscreen=D,m?this.maximize():this.move().resize(),this.focus(),o?this.mount(o):r?this.body.innerHTML=r:s&&this.setUrl(s),ka(this),(n||la).appendChild(this.dom)}wa["new"]=function(t){return new wa(t)};var ba=wa;function xa(t,e,a){if("string"===typeof t)if("center"===t)t=(e-a)/2|0;else if("right"===t||"bottom"===t)t=e-a;else{const a=parseFloat(t),n=""+a!==t&&t.substring((""+a).length);t="%"===n?e/100*a|0:a}return t}function Ca(){la=document.body,la[fa="requestFullscreen"]||la[fa="msRequestFullscreen"]||la[fa="webkitRequestFullscreen"]||la[fa="mozRequestFullscreen"]||(fa=""),ma=fa&&fa.replace("request","exit").replace("mozRequest","mozCancel").replace("Request","Exit"),Ze(window,"resize",(function(){La(),_a()})),La()}function ka(t){Ia(t,"title"),Ia(t,"n"),Ia(t,"s"),Ia(t,"w"),Ia(t,"e"),Ia(t,"nw"),Ia(t,"ne"),Ia(t,"se"),Ia(t,"sw"),Ze(aa(t.dom,"wb-min"),"click",(function(e){ea(e),t.minimize()})),Ze(aa(t.dom,"wb-max"),"click",(function(e){ea(e),t.focus().maximize()})),fa?Ze(aa(t.dom,"wb-full"),"click",(function(e){ea(e),t.focus().fullscreen()})):t.addClass("no-full"),Ze(aa(t.dom,"wb-close"),"click",(function(e){ea(e),t.close()||(t=null)})),Ze(t.dom,"click",(function(e){t.focus()}),!1)}function Sa(t){ca.splice(ca.indexOf(t),1),_a(),t.removeClass("min"),t.min=!1,t.dom.title=""}function _a(){const t=ca.length;for(let e,a,n=0;n<t;n++)e=ca[n],a=Math.min((pa-2*e.left)/t,250),e.resize(a+1|0,35,!0).move(e.left+n*a|0,ya-e.bottom-35,!0)}function Ia(t,e){const a=aa(t.dom,"wb-"+e);let n,i,o,r,s,c;function l(){r=requestAnimationFrame(l),c&&(t.resize(),c=!1),s&&(t.move(),s=!1)}function u(a){if(ea(a,!0),t.min)t.minimize();else{if("title"===e){const e=Date.now(),a=e-ga;if(ga=e,a<250)return void t.maximize()}t.max||(na(la,"wb-drag"),sa&&l(),(n=a.touches)&&(n=n[0])?(a=n,Ze(window,"touchmove",h),Ze(window,"touchend",d)):(Ze(window,"mousemove",h),Ze(window,"mouseup",d)),i=a.pageX,o=a.pageY,t.focus())}}function h(a){ea(a),n&&(a=a.touches[0]);const r=a.pageX,l=a.pageY,u=r-i,h=l-o;let d,f,m,p;"title"===e?(t.x+=u,t.y+=h,m=p=1):("e"===e||"se"===e||"ne"===e?(t.width+=u,d=1):"w"!==e&&"sw"!==e&&"nw"!==e||(t.x+=u,t.width-=u,d=1,m=1),"s"===e||"se"===e||"sw"===e?(t.height+=h,f=1):"n"!==e&&"ne"!==e&&"nw"!==e||(t.y+=h,t.height-=h,f=1,p=1)),(d||f)&&(d&&(t.width=Math.max(Math.min(t.width,pa-t.x-t.right),150)),f&&(t.height=Math.max(Math.min(t.height,ya-t.y-t.bottom),35)),sa?c=!0:t.resize()),(m||p)&&(m&&(t.x=Math.max(Math.min(t.x,pa-t.width-t.right),t.left)),p&&(t.y=Math.max(Math.min(t.y,ya-t.height-t.bottom),t.top)),sa?s=!0:t.move()),i=r,o=l}function d(t){ea(t),ia(la,"wb-drag"),sa&&cancelAnimationFrame(r),n?(ta(window,"touchmove",h),ta(window,"touchend",d)):(ta(window,"mousemove",h),ta(window,"mouseup",d))}Ze(a,"mousedown",u),Ze(a,"touchstart",u,{passive:!1})}function La(){pa=la.clientWidth,ya=la.clientHeight}function Da(){return document["fullscreen"]||document["fullscreenElement"]||document["webkitFullscreenElement"]||document["mozFullScreenElement"]}function Ta(t){if(ha=!1,Da())return document[ma](),!0}wa.prototype.mount=function(t){return this.unmount(),t._backstore||(t._backstore=t.parentNode),this.body.textContent="",this.body.appendChild(t),this},wa.prototype.unmount=function(t){const e=this.body.firstChild;if(e){const a=t||e._backstore;a&&a.appendChild(e),e._backstore=t}return this},wa.prototype.setTitle=function(t){return ra(aa(this.dom,"wb-title"),this.title=t),this},wa.prototype.setBackground=function(t){return oa(this.dom,"background",t),this},wa.prototype.setUrl=function(t){return this.body.innerHTML='<iframe src="'+t+'"></iframe>',this},wa.prototype.focus=function(){return da!==this&&(oa(this.dom,"z-index",ua++),this.addClass("focus"),da&&(da.removeClass("focus"),da.onblur&&da.onblur()),da=this,this.onfocus&&this.onfocus()),this},wa.prototype.hide=function(){return this.addClass("hide")},wa.prototype.show=function(){return this.removeClass("hide")},wa.prototype.minimize=function(t){return ha&&Ta(this),!t&&this.min?(Sa(this),this.resize().move().focus()):!1===t||this.min||(ca.push(this),_a(),this.dom.title=this.title,this.addClass("min"),this.min=!0),this.max&&(this.removeClass("max"),this.max=!1),this},wa.prototype.maximize=function(t){return"undefined"!==typeof t&&t===this.max||(this.min&&Sa(this),(this.max=!this.max)?this.addClass("max").resize(pa-this.left-this.right,ya-this.top-this.bottom,!0).move(this.left,this.top,!0):this.resize().move().removeClass("max")),this},wa.prototype.fullscreen=function(t){return"undefined"!==typeof t&&t===ha||(this.min&&(this.resize().move(),Sa(this)),ha&&Ta(this)||(this.body[fa](),ha=!0)),this},wa.prototype.close=function(t){if(this.onclose&&this.onclose(t))return!0;this.min&&Sa(this),this.unmount(),this.dom.parentNode.removeChild(this.dom),da===this&&(da=null)},wa.prototype.move=function(t,e,a){return t||0===t?a||(this.x=t?t=xa(t,pa-this.left-this.right,this.width):0,this.y=e?e=xa(e,ya-this.top-this.bottom,this.height):0):(t=this.x,e=this.y,this.splitscreen&&(0===t||t===pa-this.width)&&this.resize(pa/2,ya)),oa(this.dom,"transform","translate("+t+"px,"+e+"px)"),this.onmove&&this.onmove(t,e),this},wa.prototype.resize=function(t,e,a){return t||0===t?a||(this.width=t?t=xa(t,pa-this.left-this.right):0,this.height=e?e=xa(e,ya-this.top-this.bottom):0):(t=this.width,e=this.height),t=Math.max(t,this.minwidth),e=Math.max(e,this.minheight),oa(this.dom,"width",t+"px"),oa(this.dom,"height",e+"px"),this.onresize&&this.onresize(t,e),this},wa.prototype.addClass=function(t){return na(this.dom,t),this},wa.prototype.removeClass=function(t){return ia(this.dom,t),this};a("7342");var Oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{height:t.height},attrs:{id:t.id}},[t._t("default")],2)},Na=[],za={name:"Index",props:{id:{type:String,required:!0},value:{type:String,required:!0},language:{type:String,default:"json"},height:{type:String,default:"200px"}},data:function(){return{editor:null}},mounted:function(){this.initEditor()},methods:{initEditor:function(){var t=this;this.editor=window.monaco.editor.create(document.getElementById(this.id),{value:this.value,language:this.language,automaticLayout:!0,roundedSelection:!1,fontSize:16,autoIndent:!0,theme:"vs-dark"}),this.editor.trigger("anything","editor.action.formatDocument"),this.editor.onDidBlurEditorText((function(){t.handleEditorBlur()})),this.editor.onDidChangeModelContent((function(){t.handleValueChange()}))},handleEditorBlur:function(){this.$emit("blur")},handleValueChange:function(){this.$emit("change",this.editor.getValue())},setValue:function(t){this.editor.setValue(t)}}},Ma=za,$a=Object(te["a"])(Ma,Oa,Na,!1,null,null,null),Ea=$a.exports,Ba=a("84bf"),Ra=[{label:"分类字段",value:"dimension"},{label:"x轴字段",value:"name"},{label:"y轴字段",value:"value"}],ja=[{label:"数据字段",value:"name"},{label:"值字段",value:"value"}],Aa=[{label:"数据字段",value:"value"}],Pa={ScatterNormal_1:Ra,LineNormal_1:Ra,LineArea_1:Ra,HistogramNormal_1:Ra,PictorialBar_1:Ra,MapChina_1:ja,PieNormal_1:ja,RadarNormal_1:[{label:"分类字段",value:"dimension"},{label:"最大值",value:"max"},{label:"数据字段",value:"name"},{label:"值字段",value:"value"}],wordCloud_1:[],gauge_1:[],FunnelNormal_1:[],EarlyWarning_1:Aa,TitleText_1:null,ImageChart_1:null,Border1_1:null,CarouselList_1:[],CarouselList_2:[],Counter_1:Aa,NumberFlop_1:Aa,Progress_1:Aa},Ha={name:"ChartOption",components:{CodeEditor:Ea},props:{dataSourceList:{type:Array,default:function(){return[]}}},data:function(){return{serviceBaseUrl:d["a"].serviceBaseUrl,restResult:null,paramsMap:Pa,dataSourceTypeList:Ba["b"],positionList:Ba["j"],positionTopList:Ba["k"],legendTypeList:Ba["g"],orientList:Ba["i"]}},computed:Object(u["mapState"])(["currentItem"]),watch:{currentItem:function(){var t=this;"Static"===this.currentItem.chartData.dataSourceType&&this.$nextTick((function(){t.$refs.staticData.setValue(t.currentItem.chartData.staticData)}))}},mounted:function(){},methods:{showData:function(){return null!==this.params()},params:function(){return Pa["".concat(this.currentItem.type,"_").concat(this.currentItem.version)]},handleConfigChange:function(){"Static"===this.currentItem.chartData.dataSourceType?De["a"].$emit("handleStaticData"):"DataBase"===this.currentItem.chartData.dataSourceType?De["a"].$emit("handleDataBaseData"):"Rest"===this.currentItem.chartData.dataSourceType?(this.currentItem.chartData.restUrl||(this.currentItem.chartData.restUrl="".concat(this.serviceBaseUrl,"data-view/test-chart-data?chartType=")),De["a"].$emit("handleRestData")):"File"===this.currentItem.chartData.dataSourceType&&De["a"].$emit("handleFileData")},handleStaticDataChange:function(t){this.currentItem.chartData.staticData=t},handleEditRest:function(){new ba("调试RestAPI",{x:"center",y:"center",width:"75%",height:"75%",class:"modern",mount:document.getElementById("rest-data")})}}},Ua=Ha,qa=(a("3d9c"),Object(te["a"])(Ua,Ke,Ve,!1,null,null,null)),Ga=qa.exports,Xa=a("6b45"),Fa=a("4d2e"),Wa=a("685c"),Ya=a("3ee2"),Ka={name:"Index",components:{Layout:_e,Item:He,Chart:Ue["a"],Layer:Ye,ChartOption:Ga,UploadImage:Xa["a"]},data:function(){return{menus:h,routerBase:d["a"].routerBase,layerCollapsed:!1,optionCollapsed:!1,loading:!0,instanceId:null,isCopy:null,dataSourceList:[],backgroundImgList:[],instanceVersion:1}},computed:Object(r["a"])({scale:{get:function(){return 100*this.$store.state.canvasConfig.scale},set:function(t){this.$store.commit("setCanvasScale",{scale:t})}},refLine:{get:function(){return this.$store.state.canvasConfig.refLine},set:function(t){this.$store.commit("setRefLine",t)}},indicatorLine:{get:function(){return this.$store.state.canvasConfig.indicatorLine},set:function(t){this.$store.commit("setIndicatorLine",t)}},screenConfig:{get:function(){return this.$store.state.screenConfig},set:function(t){this.$store.commit("setScreenConfig",t)}}},Object(u["mapState"])(["items","canvasConfig","clickItem","currentItem"])),watch:{},created:function(){this.getDataSourceList(),this.getImageList();var t=this.$route.params.instance_id,e=this.$route.params.is_copy;t?(this.instanceId=parseInt(t),this.isCopy=parseInt(e),this.getDataView(t)):this.$store.commit("autoCanvasScale")},methods:{handleDragStart:function(t,e,a){t.dataTransfer.setData("type","".concat(e,"_").concat(a))},handleDragOver:function(t){t.preventDefault()},handleDrop:function(t){var e=t.dataTransfer.getData("type");if(e){var a=tt[e]();a.style.x=t.offsetX-a.style.width/2,a.style.y=t.offsetY-a.style.height/2,a.hover=!1,this.$store.commit("addItem",a)}},handleItemUnClick:function(){this.$store.commit("setClickItem",!1)},handleItemUnChoose:function(t){this.clickItem||this.$store.commit("setCurrentItem",{item:null,index:-1}),2!==t.button&&this.$store.commit("hideContextmenu")},handleImageUploaded:function(){this.getImageList()},getDataSourceList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Fa["a"])();case 2:a=e.sent,t.dataSourceList=a.data;case 4:case"end":return e.stop()}}),e)})))()},getImageList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Wa["a"])({imageType:"screen_background"});case 2:a=e.sent,t.backgroundImgList=a.data;case 4:case"end":return e.stop()}}),e)})))()},getDataView:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Ya["b"])(t);case 3:if(n=a.sent,e.screenConfig.title=n.data.instance_title,e.screenConfig.width=n.data.instance_width,e.screenConfig.height=n.data.instance_height,e.screenConfig.backgroundImg=n.data.instance_background_img,e.$store.commit("autoCanvasScale"),i=n.data.chart_items,!(null!==i&&void 0!==i&&i.length>0)){a.next=15;break}return i.map((function(t){return t.style={x:t.x,y:t.y,width:t.width,height:t.height,rotate:t.rotate},t.data=JSON.parse(t.data),t.chartData=JSON.parse(t.chartData),t.option=JSON.parse(t.option),t})),e.instanceVersion=n.data.instance_version,a.next=15,e.$store.dispatch("setCharts",i);case 15:a.next=20;break;case 17:a.prev=17,a.t0=a["catch"](0),console.log("获取大屏信息或解析大屏信息失败",a.t0);case 20:case"end":return a.stop()}}),a,null,[[0,17]])})))()},handleBack:function(){this.$router.push("/data-view/index")},handleSave:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,i,o,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.screenshot();case 2:if(a=e.sent,a.success){e.next=6;break}return l["message"].error("保存缩略图失败"),e.abrupt("return");case 6:if(n=JSON.parse(JSON.stringify(t.items)),n.map((function(t,e){return t.index=e,t.x=t.style.x,t.y=t.style.y,t.width=t.style.width,t.height=t.style.height,t.rotate=t.style.rotate,t.data=JSON.stringify(t.data),t.chartData=JSON.stringify(t.chartData),t.option=JSON.stringify(t.option),t})),1===t.isCopy&&(t.instanceId=null),i={instance_id:t.instanceId,instance_title:t.screenConfig.title,instance_width:t.screenConfig.width,instance_height:t.screenConfig.height,instance_background_img:t.screenConfig.backgroundImg,instance_view_thumbnail:a.data,instance_version:t.instanceVersion,chart_items:n},!t.instanceId){e.next=17;break}return e.next=13,Object(Ya["e"])(i);case 13:o=e.sent,o.success?(l["message"].success("更新成功"),window.location.href=t.routerBase+"data-view-instance/edit/"+t.instanceId+"/0"):l["message"].success("更新失败, "+o.data),e.next=21;break;case 17:return e.next=19,Object(Ya["d"])(i);case 19:r=e.sent,r.success?(s=r.data,l["message"].success("保存成功"),window.location.href=t.routerBase+"data-view-instance/edit/"+s+"/0"):l["message"].success("保存失败, "+r.data);case 21:case"end":return e.stop()}}),e)})))()},screenshot:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,i,o,r,s,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("setCurrentItem",{item:null,index:-1}),a=document.getElementById("data-view-layout"),n=a.style.transform,a.style.transform="scale(1) translate(0px, 0px)",i={logger:!1,allowTaint:!0,useCORS:!0,scrollX:0,scrollY:0,width:t.screenConfig.width,height:t.screenConfig.height},e.next=7,c()(a,i);case 7:for(o=e.sent,a.style.transform=n,r=window.atob(o.toDataURL("image/png").split(",")[1]),s=new Uint8Array(r.length),l=0;l<r.length;l++)s[l]=r.charCodeAt(l);return u=new FormData,u.append("file",new Blob([s],{type:"image/png"}),"".concat((new Date).getTime(),"_thumbnail.png")),e.abrupt("return",Object(Wa["b"])(u));case 15:case"end":return e.stop()}}),e)})))()},handlePreview:function(){this.instanceId?window.open(this.routerBase+"data-view-instance/preview/"+this.instanceId):l["message"].info("请先保存图表后预览")},handleDebug:function(){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}}},Va=Ka,Ja=(a("8ed4"),Object(te["a"])(Va,n,i,!1,null,null,null));e["default"]=Ja.exports},b50f:function(t,e,a){},f2bc:function(t,e,a){"use strict";a("f480")},f480:function(t,e,a){},f842:function(t,e,a){},fe77:function(t,e,a){}}]);